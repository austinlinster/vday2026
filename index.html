<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Will You Be My Valentine?</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 800px;
            width: 100%;
        }

        h1 {
            color: #e74c3c;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2em;
        }

        .pin-screen {
            text-align: center;
        }

        .pin-input {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 30px 0;
        }

        .pin-digit {
            width: 60px;
            height: 70px;
            font-size: 2em;
            text-align: center;
            border: 3px solid #e74c3c;
            border-radius: 10px;
            text-transform: uppercase;
        }

        .pin-digit:focus {
            outline: none;
            border-color: #c0392b;
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.5);
        }

        .error {
            color: #e74c3c;
            margin-top: 10px;
            font-style: italic;
        }

        .map-screen {
            display: none;
        }

        .trail-map {
            position: relative;
            height: 600px;
            background: linear-gradient(to bottom, #87CEEB 0%, #98D8C8 100%);
            border-radius: 15px;
            padding: 40px;
            overflow: hidden;
        }

        .trail-path {
            position: absolute;
            top: 100px;
            left: 80px;
            width: calc(100% - 160px);
            height: 420px;
        }

        .trail-path svg {
            width: 100%;
            height: 100%;
        }

        .trail-stop {
            position: absolute;
            width: 80px;
            height: 80px;
            background: #e74c3c;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: transform 0.3s;
            font-size: 2em;
            border: 4px solid white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .trail-stop:hover {
            transform: scale(1.1);
        }

        .trail-stop.completed {
            background: #27ae60;
        }

        .start-sign {
            position: absolute;
            top: 20px;
            left: 30px;
            background: #3498db;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.2em;
        }

        .finish-sign {
            position: absolute;
            bottom: 40px;
            right: 50px;
            background: #f39c12;
            color: white;
            padding: 20px 30px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.3em;
            cursor: pointer;
            transition: transform 0.3s;
            border: 4px solid white;
            z-index: 10;
        }

        .finish-sign:hover {
            transform: scale(1.05);
        }

        .finish-sign.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        #stop1 { top: 140px; left: 200px; }
        #stop2 { top: 300px; left: 50%; transform: translateX(-50%); }
        #stop3 { bottom: 120px; right: 180px; }

        .activity-screen {
            display: none;
        }

        .back-btn {
            background: #95a5a6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 20px;
            font-size: 1em;
        }

        .back-btn:hover {
            background: #7f8c8d;
        }

        .crossword-grid {
            display: grid;
            grid-template-columns: repeat(10, 40px);
            gap: 2px;
            margin: 20px auto;
            width: fit-content;
        }

        .crossword-cell {
            width: 40px;
            height: 40px;
            border: 1px solid #ccc;
            display: flex;
            justify-content: center;
            align-items: center;
            background: white;
            position: relative;
        }

        .crossword-cell.black {
            background: #2c3e50;
        }

        .crossword-cell input {
            width: 100%;
            height: 100%;
            border: none;
            text-align: center;
            font-size: 1.2em;
            text-transform: uppercase;
            background: transparent;
        }

        .crossword-cell input:focus {
            outline: none;
            background: #fff3cd;
        }

        .cell-number {
            position: absolute;
            top: 2px;
            left: 3px;
            font-size: 0.6em;
            color: #666;
        }

        .clues {
            margin-top: 20px;
        }

        .clue {
            margin: 10px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .clue-buttons {
            margin-top: 5px;
        }

        .clue-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 10px;
            font-size: 0.9em;
        }

        .clue-btn:hover {
            background: #2980b9;
        }

        .hint-text {
            color: #27ae60;
            font-style: italic;
            margin-top: 5px;
        }

        .tapping-game {
            text-align: center;
            padding: 20px;
        }

        .panda-container {
            position: relative;
            display: inline-block;
            margin: 30px 0;
        }

        .panda-img {
            width: 300px;
            height: 300px;
            cursor: pointer;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hammer {
            position: absolute;
            width: 200px;
            height: 200px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.1s;
            font-size: 200px;
        }

        .hammer.active {
            opacity: 1;
            animation: hammer-hit 0.3s;
        }

        @keyframes hammer-hit {
            0% { transform: rotate(-45deg) scale(0.8); }
            50% { transform: rotate(0deg) scale(1.2); }
            100% { transform: rotate(0deg) scale(1); }
        }

        .counter {
            font-size: 2em;
            color: #e74c3c;
            font-weight: bold;
            margin: 20px 0;
        }

        .price-game {
            padding: 20px;
        }

        .clothing-item {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .clothing-img {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border-radius: 8px;
        }

        .price-input {
            width: 100px;
            padding: 8px;
            font-size: 1em;
            border: 2px solid #e74c3c;
            border-radius: 5px;
        }

        .submit-guess {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            margin-top: 20px;
        }

        .submit-guess:hover {
            background: #c0392b;
        }

        .final-screen {
            display: none;
            text-align: center;
        }

        .invitation-card {
            background: linear-gradient(to bottom, #ffe6e6, #fff);
            border: 3px solid #e74c3c;
            border-radius: 15px;
            padding: 40px;
            max-width: 900px;
            margin: 0 auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .invitation-content {
            flex: 1;
        }

        .invitation-photo {
            width: 300px;
            height: 400px;
            object-fit: cover;
            border-radius: 10px;
            border: 3px solid #e74c3c;
        }

        .invitation-card h2 {
            color: #e74c3c;
            font-size: 2.5em;
            margin-bottom: 30px;
        }

        .date-details {
            text-align: left;
            margin: 20px 0;
            font-size: 1.1em;
            line-height: 1.8;
        }

        .date-details strong {
            color: #c0392b;
        }

        .hearts {
            font-size: 2em;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- PIN Screen -->
        <div class="pin-screen" id="pinScreen">
            <h1>üíù Will You Be My Valentine? üíù</h1>
            <p style="font-size: 1.2em; margin: 20px 0;">Enter the secret code:</p>
            <div class="pin-input">
                <input type="text" class="pin-digit" maxlength="1" id="pin1">
                <input type="text" class="pin-digit" maxlength="1" id="pin2">
                <input type="text" class="pin-digit" maxlength="1" id="pin3">
            </div>
            <p class="error" id="pinError"></p>
        </div>

        <!-- Map Screen -->
        <div class="map-screen" id="mapScreen">
            <h1>üíï Your Valentine's Adventure üíï</h1>
            <p style="text-align: center; margin-bottom: 20px;">Complete all three activities to unlock your surprise!</p>
            <div class="trail-map">
                <div class="start-sign">START</div>
                <div class="trail-path">
                    <svg viewBox="0 0 700 420" xmlns="http://www.w3.org/2000/svg">
                        <path d="M 40 40 Q 100 100, 160 100 T 280 180 Q 350 220, 420 220 T 580 320 Q 630 360, 660 380" 
                              stroke="#8B4513" 
                              stroke-width="6" 
                              stroke-dasharray="15,10" 
                              fill="none"
                              stroke-linecap="round"/>
                    </svg>
                </div>
                <div class="trail-stop" id="stop1" onclick="openActivity(1)">
                    <span>üìù</span>
                </div>
                <div class="trail-stop" id="stop2" onclick="openActivity(2)">
                    <span>üêº</span>
                </div>
                <div class="trail-stop" id="stop3" onclick="openActivity(3)">
                    <span>üëó</span>
                </div>
                <div class="finish-sign disabled" id="finishBtn" onclick="openFinal()">
                    üèÅ FINISH
                </div>
            </div>
        </div>

        <!-- Activity 1: Crossword -->
        <div class="activity-screen" id="activity1">
            <button class="back-btn" onclick="backToMap()">‚Üê Back to Map</button>
            <h1>üíë Our Love Story Crossword üíë</h1>
            <p style="text-align: center; margin-bottom: 20px;">Fill in the crossword with answers about us!</p>
            
            <div class="crossword-grid" id="crosswordGrid"></div>
            
            <div class="clues">
                <h3>Across:</h3>
                <div class="clue">
                    <strong>1. Who is our biggest opp/favorite child (5 letters)</strong>
                    <div class="clue-buttons">
                        <button class="clue-btn" onclick="showHint(1)">üí° Hint</button>
                        <button class="clue-btn" onclick="giveUp(1)">üè≥Ô∏è Give Up</button>
                    </div>
                    <p class="hint-text" id="hint1"></p>
                </div>
                <div class="clue">
                    <strong>3. Our first date activity was _____ and weed (5 letters)</strong>
                    <div class="clue-buttons">
                        <button class="clue-btn" onclick="showHint(3)">üí° Hint</button>
                        <button class="clue-btn" onclick="giveUp(3)">üè≥Ô∏è Give Up</button>
                    </div>
                    <p class="hint-text" id="hint3"></p>
                </div>
                <h3 style="margin-top: 20px;">Down:</h3>
                <div class="clue">
                    <strong>2. What app did we meet on (5 letters)</strong>
                    <div class="clue-buttons">
                        <button class="clue-btn" onclick="showHint(2)">üí° Hint</button>
                        <button class="clue-btn" onclick="giveUp(2)">üè≥Ô∏è Give Up</button>
                    </div>
                    <p class="hint-text" id="hint2"></p>
                </div>
                <div class="clue">
                    <strong>4. I made this for dinner the night I took your v-card (5 letters)</strong>
                    <div class="clue-buttons">
                        <button class="clue-btn" onclick="showHint(4)">üí° Hint</button>
                        <button class="clue-btn" onclick="giveUp(4)">üè≥Ô∏è Give Up</button>
                    </div>
                    <p class="hint-text" id="hint4"></p>
                </div>
                <div class="clue">
                    <strong>5. Who is my favorite girl in the world (5 letters)</strong>
                    <div class="clue-buttons">
                        <button class="clue-btn" onclick="showHint(5)">üí° Hint</button>
                        <button class="clue-btn" onclick="giveUp(5)">üè≥Ô∏è Give Up</button>
                    </div>
                    <p class="hint-text" id="hint5"></p>
                </div>
            </div>
        </div>

        <!-- Activity 2: Tapping Game -->
        <div class="activity-screen" id="activity2">
            <button class="back-btn" onclick="backToMap()">‚Üê Back to Map</button>
            <h1>üêº Panda Tapping Challenge üêº</h1>
            <p>Tap the panda 100 times!</p>
            <div class="counter">Taps: <span id="tapCount">0</span> / 100</div>
            <div class="panda-container">
                <div class="hammer" id="hammer">üî®</div>
                <div class="panda-img" id="panda" onclick="tapPanda(event)">
                    <img src="panda.jpg" alt="Panda" style="width: 100%; height: 100%; object-fit: contain;">
                </div>
            </div>
        </div>

        <!-- Activity 3: Price Game -->
        <div class="activity-screen" id="activity3">
            <button class="back-btn" onclick="backToMap()">‚Üê Back to Map</button>
            <h1>üëó Abercrombie Price Guessing Game üëó</h1>
            <p style="text-align: center; margin-bottom: 20px;">Guess the price of each item!</p>
            <div class="price-game" id="priceGame">
                <div class="clothing-item">
                    <img src="clothing1.jpg" alt="Clothing Item 1" class="clothing-img">
                    <div style="flex: 1;">
                        <h3>Cozy Sweater</h3>
                        <p>Your guess: $<input type="number" class="price-input" id="price1"></p>
                        <p id="answer1" style="color: #27ae60; font-weight: bold; margin-top: 10px;"></p>
                    </div>
                </div>
                <div class="clothing-item">
                    <img src="clothing2.jpg" alt="Clothing Item 2" class="clothing-img">
                    <div style="flex: 1;">
                        <h3>Classic Jeans</h3>
                        <p>Your guess: $<input type="number" class="price-input" id="price2"></p>
                        <p id="answer2" style="color: #27ae60; font-weight: bold; margin-top: 10px;"></p>
                    </div>
                </div>
                <div class="clothing-item">
                    <img src="clothing3.jpg" alt="Clothing Item 3" class="clothing-img">
                    <div style="flex: 1;">
                        <h3>Puffer Jacket</h3>
                        <p>Your guess: $<input type="number" class="price-input" id="price3"></p>
                        <p id="answer3" style="color: #27ae60; font-weight: bold; margin-top: 10px;"></p>
                    </div>
                </div>
                <button class="submit-guess" onclick="submitGuesses()">Submit Guesses</button>
            </div>
        </div>

        <!-- Final Screen -->
        <div class="final-screen" id="finalScreen">
            <div class="invitation-card">
                <div class="invitation-content">
                    <h2>üíñ You're Invited! üíñ</h2>
                    <div class="hearts">üíï üíù üíï</div>
                    <div class="date-details">
                        <p><strong>Date:</strong> February 21st, 2025</p>
                        <p><strong>Time:</strong> 6:15 PM Pickup</p>
                        <p><strong>Location:</strong> Dallas, TX</p>
                        <p><strong>Dress Code:</strong> Your green colored dress</p>
                        <p style="margin-top: 30px; font-style: italic; text-align: center;">
                            "I can't wait to spend this special day with you. You make every day feel like Valentine's Day."
                        </p>
                    </div>
                    <div class="hearts">üíï üíù üíï</div>
                </div>
                <img src="us_reduced.jpg" alt="Us" class="invitation-photo">
            </div>
        </div>
    </div>

    <script>
        const gameState = {
            completed: {
                activity1: false,
                activity2: false,
                activity3: false
            },
            tapCount: 0
        };

        const crosswordAnswers = {
            1: 'PANDA',
            2: 'HINGE',
            3: 'LEGOS',
            4: 'STEAK',
            5: 'STEPH'
        };

        const hints = {
            1: 'Our favorite furry troublemaker!',
            2: 'Swipe right app...',
            3: 'Building blocks of our relationship!',
            4: 'A juicy main course...',
            5: 'The most special person to me!'
        };

        const prices = {
            1: 75,
            2: 95,
            3: 100
        };

        // PIN functionality
        const pins = document.querySelectorAll('.pin-digit');
        pins.forEach((pin, index) => {
            pin.addEventListener('input', (e) => {
                if (e.target.value.length === 1 && index < pins.length - 1) {
                    pins[index + 1].focus();
                }
                checkPin();
            });

            pin.addEventListener('keydown', (e) => {
                if (e.key === 'Backspace' && e.target.value === '' && index > 0) {
                    pins[index - 1].focus();
                }
            });
        });

        function checkPin() {
            const pin = Array.from(pins).map(p => p.value).join('').toUpperCase();
            if (pin.length === 3) {
                if (pin === 'YES') {
                    document.getElementById('pinScreen').style.display = 'none';
                    document.getElementById('mapScreen').style.display = 'block';
                    createCrossword();
                } else {
                    document.getElementById('pinError').textContent = 'Incorrect code! Try again üíï';
                    pins.forEach(p => p.value = '');
                    pins[0].focus();
                }
            }
        }

        function openActivity(num) {
            document.getElementById('mapScreen').style.display = 'none';
            document.getElementById('activity' + num).style.display = 'block';
        }

        function backToMap() {
            document.querySelectorAll('.activity-screen').forEach(s => s.style.display = 'none');
            document.getElementById('mapScreen').style.display = 'block';
            updateFinishButton();
        }

        function createCrossword() {
            const grid = document.getElementById('crosswordGrid');
            
            // Create a 10x10 grid filled with black cells
            // Grid coordinates: (0,0) = bottom-left, (9,9) = top-right
            // But array indices: [0][0] = top-left
            // So we need to flip: array[9-y][x] for coordinate (x,y)
            const layout = Array(10).fill(null).map(() => Array(10).fill('X'));
            
            // 1-ACROSS: PANDA - Horizontal from (2,6) to (6,6)
            // y=6 means array row 3 (9-6=3)
            layout[3][2] = '1P';
            layout[3][3] = 'A';
            layout[3][4] = 'N';
            layout[3][5] = 'D';
            layout[3][6] = 'A';
            
            // 2-DOWN: HINGE - Vertical from (4,8) to (4,4)
            // x=4, y goes from 8 down to 4, so array rows 1 to 5 (9-8=1 to 9-4=5)
            layout[1][4] = '2H';
            layout[2][4] = 'I';
            layout[3][4] = 'N';  // Intersects with PANDA
            layout[4][4] = 'G';
            layout[5][4] = 'E';
            
            // 3-ACROSS: LEGOS - Horizontal from (3,4) to (7,4)
            // y=4 means array row 5 (9-4=5)
            layout[5][3] = '3L';
            layout[5][4] = 'E';  // Intersects with HINGE
            layout[5][5] = 'G';
            layout[5][6] = 'O';
            layout[5][7] = 'S';
            
            // 4-DOWN: STEAK - Vertical from (7,4) to (7,0)
            // x=7, y goes from 4 down to 0, so array rows 5 to 9 (9-4=5 to 9-0=9)
            layout[5][7] = 'S';  // Intersects with LEGOS (already placed)
            layout[6][7] = 'T';
            layout[7][7] = 'E';
            layout[8][7] = 'A';
            layout[9][7] = 'K';
            
            // 5-DOWN: STEPH - Vertical from (2,9) to (2,5)
            // x=2, y goes from 9 down to 5, so array rows 0 to 4 (9-9=0 to 9-5=4)
            layout[0][2] = '5S';
            layout[1][2] = 'T';
            layout[2][2] = 'E';
            layout[3][2] = 'P';  // Intersects with PANDA (already placed)
            layout[4][2] = 'H';

            // Add number to intersecting STEAK start
            layout[5][7] = '4S';

            layout.forEach((row, i) => {
                row.forEach((cell, j) => {
                    const div = document.createElement('div');
                    div.className = 'crossword-cell';
                    
                    if (cell === 'X') {
                        div.className += ' black';
                    } else {
                        // Check if cell has a number (like '1P', '2H', etc)
                        const hasNumber = /^\d/.test(cell);
                        const letter = hasNumber ? cell.slice(1) : cell;
                        const number = hasNumber ? cell.slice(0, 1) : null;
                        
                        if (number) {
                            const num = document.createElement('span');
                            num.className = 'cell-number';
                            num.textContent = number;
                            div.appendChild(num);
                        }
                        
                        const input = document.createElement('input');
                        input.maxLength = 1;
                        input.dataset.row = i;
                        input.dataset.col = j;
                        input.dataset.answer = letter.toUpperCase();
                        input.addEventListener('input', checkCrossword);
                        div.appendChild(input);
                    }
                    
                    grid.appendChild(div);
                });
            });
        }

        function checkCrossword() {
            const inputs = document.querySelectorAll('#crosswordGrid input');
            let allCorrect = true;
            
            inputs.forEach(input => {
                if (input.value === '') allCorrect = false;
            });

            if (allCorrect) {
                gameState.completed.activity1 = true;
                document.getElementById('stop1').classList.add('completed');
                alert('Congratulations! You completed the crossword! üíï');
            }
        }

        function showHint(clue) {
            document.getElementById('hint' + clue).textContent = hints[clue];
        }

        function giveUp(clue) {
            document.getElementById('hint' + clue).textContent = 'Answer: ' + crosswordAnswers[clue];
            const inputs = document.querySelectorAll(`#crosswordGrid input[data-clue="${clue}"]`);
            inputs.forEach((input, i) => {
                input.value = crosswordAnswers[clue][i];
            });
            checkCrossword();
        }

        function tapPanda(event) {
            gameState.tapCount++;
            document.getElementById('tapCount').textContent = gameState.tapCount;
            
            // Play sound
            const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBTGH0fPTgjMGHm7A7+OZURE');
            audio.volume = 0.3;
            audio.play().catch(() => {}); // Ignore errors if sound doesn't play
            
            const hammer = document.getElementById('hammer');
            const rect = event.currentTarget.getBoundingClientRect();
            hammer.style.left = (event.clientX - rect.left - 100) + 'px';
            hammer.style.top = (event.clientY - rect.top - 100) + 'px';
            hammer.classList.add('active');
            
            setTimeout(() => {
                hammer.classList.remove('active');
            }, 300);

            if (gameState.tapCount >= 100) {
                gameState.completed.activity2 = true;
                document.getElementById('stop2').classList.add('completed');
                setTimeout(() => {
                    alert('Amazing! You tapped 100 times! üêºüíï');
                }, 300);
            }
        }

        function submitGuesses() {
            document.getElementById('answer1').textContent = `Actual price: $${prices[1]}`;
            document.getElementById('answer2').textContent = `Actual price: $${prices[2]}`;
            document.getElementById('answer3').textContent = `Actual price: $${prices[3]}`;
            
            gameState.completed.activity3 = true;
            document.getElementById('stop3').classList.add('completed');
            setTimeout(() => {
                alert('Great guesses! Activity complete! üëóüíï');
            }, 100);
        }

        function updateFinishButton() {
            const allComplete = gameState.completed.activity1 && 
                              gameState.completed.activity2 && 
                              gameState.completed.activity3;
            
            const finishBtn = document.getElementById('finishBtn');
            if (allComplete) {
                finishBtn.classList.remove('disabled');
            }
        }

        function openFinal() {
            const allComplete = gameState.completed.activity1 && 
                              gameState.completed.activity2 && 
                              gameState.completed.activity3;
            
            if (allComplete) {
                document.getElementById('mapScreen').style.display = 'none';
                document.getElementById('finalScreen').style.display = 'block';
            } else {
                alert('Complete all three activities first! üíï');
            }
        }

        pins[0].focus();
    </script>
</body>
</html>